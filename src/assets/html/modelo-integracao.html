<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="./../css/estilo.css">
</head>

<body>
  <div class="section">
    <p><span class="label">Descri√ß√£o da fila:</span> <span class="fst-italic">$descricao</span></p>
    <p>
      <span class="label">Chave:</span> <b>$chave</b><br>
      <small>‚óá Esta chave √© de uso exclusivo da fila cadastrada e somente poder√° ser utilizada para essa
        finalidade.</small>
    </p>
    <p>
      <span class="label">Data in√≠cio:</span> $dataInicio /
      <span class="label">Data final:</span> $dataFinal<br>
      <small>‚óá A fila possui um per√≠odo de validade definido. Caso seja necess√°ria uma fila com caracter√≠sticas
        semelhantes, ser√° preciso realizar um novo cadastro.</small>
    </p>

    <p>
      <span class="label">Token:</span><br>
      <small>‚óá Por quest√µes de seguran√ßa, √© necess√°rio inserir o <b>token</b> no cabe√ßalho (<b>header</b>) da
        requisi√ß√£o.
        O token foi enviado para o e-mail cadastrado.</small>
    </p>

    <p>
      <span class="label">Endpoint:</span> <b>https://{dominio}/api/recurso</b><br>
      <span class="label">Body:</span> <b>conte√∫do da requisi√ß√£o no formato JSON</b><br>
      <small>
        ‚óá A mensagem no formato JSON deve ser enviada no corpo (<b>body</b>) da requisi√ß√£o, utilizando o m√©todo HTTP
        POST.<br>
        Certifique-se de que o cabe√ßalho <code>Content-Type</code> esteja definido como <code>application/json</code>.
      </small>
    </p>
  </div>

  <hr>

  <div class="section">
  <h3>üîπ 1. Angular ‚Äì Servi√ßo para Enviar Requisi√ß√£o (com QueryString)</h3>
  <pre><code>// src/app/services/mensagem.service.ts
import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { Observable } from 'rxjs';

@Injectable({ providedIn: 'root' })
export class MensagemService {
  private apiUrl = 'https://{dominio}/api'; // Substitua {dominio} pelo endere√ßo real da API

  constructor(private http: HttpClient) {}

  /**
   * Envia uma mensagem para a API .NET com par√¢metros na query string.
   * 
   * @param payload Conte√∫do JSON a ser enviado no body
   * @param guid GUID que ser√° enviado na query string
   * @param tipoArquivo Tipo do arquivo (par√¢metro num√©rico da query string)
   * @returns Observable com a resposta da API
   */
  enviarMensagem(payload: any, guid: string, tipoArquivo: number): Observable<any> {
    const headers = new HttpHeaders({
      'Content-Type': 'application/json'
    });

    const params = new HttpParams()
      .set('guid', guid)
      .set('TipoArquivo', tipoArquivo.toString());

    return this.http.post(this.apiUrl, payload, { headers, params });
  }
}
</code></pre>
</div>


  <div class="section">
    <h3>üîπ 2. C# .NET ‚Äì Controller que recebe o JSON com headers</h3>
    <pre><code>// Controllers/MensagemController.cs
[ApiController]
[Route("api")]
public class MensagemController : ControllerBase
{
    [HttpPost]
    public IActionResult ReceberMensagem([FromBody] object dados)
    {
        var chave = Request.Headers["chave"].ToString();
        var token = Request.Headers["token"].ToString();

        if (string.IsNullOrEmpty(chave) || string.IsNullOrEmpty(token))
            return BadRequest("Cabe√ßalhos 'chave' e 'token' s√£o obrigat√≥rios.");

        // Processar a mensagem
        return Ok(new { mensagem = "Recebido com sucesso!", dados });
    }
}</code></pre>
  </div>

  <div class="section">
    <h3>üîπ 3. Node.js com Express</h3>
    <pre><code>// index.js
const express = require('express');
const app = express();
app.use(express.json());

app.post('/api', (req, res) => {
  const chave = req.header('chave');
  const token = req.header('token');

  if (!chave || !token) {
    return res.status(400).json({ erro: 'Cabe√ßalhos "chave" e "token" s√£o obrigat√≥rios.' });
  }

  const dados = req.body;
  // Processar os dados...

  res.json({ mensagem: 'Mensagem recebida com sucesso!', dados });
});

app.listen(7295, () => console.log('API rodando na porta 7295'));</code></pre>
  </div>

  <div class="section">
    <h3>üîπ 4. Java com Spring Boot</h3>
    <pre><code>// MensagemController.java
@RestController
@RequestMapping("/api")
public class MensagemController {

    @PostMapping
    public ResponseEntity&lt;?&gt; receberMensagem(
            @RequestHeader("chave") String chave,
            @RequestHeader("token") String token,
            @RequestBody Map&lt;String, Object&gt; dados) {

        if (chave == null || token == null) {
            return ResponseEntity.badRequest().body("Cabe√ßalhos 'chave' e 'token' s√£o obrigat√≥rios.");
        }

        // Processar os dados...
        return ResponseEntity.ok(Map.of(
            "mensagem", "Mensagem recebida com sucesso!",
            "dados", dados
        ));
    }
}</code></pre>
  </div>

</body>

</html>