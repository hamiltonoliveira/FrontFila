server {
  # O bloco 'server' define um servidor virtual (virtual host) no Nginx.

  listen 80;
  # Faz o Nginx escutar na porta 80, a porta padrão do HTTP.

  server_name localhost;
  # Define o nome do servidor (hostname) que este bloco vai atender. Aqui é 'localhost'.
  # Para rodar na nuvem e responder a requisições externas:
  # Você deve configurar o server_name para o domínio público ou IP que será usado, por exemplo:
  # server_name example.com;

  # Para um container na nuvem, o jeito mais flexível e seguro é: server_name _;


  root /usr/share/nginx/html;
  # Define o diretório raiz de onde os arquivos estáticos serão servidos.

  index index.html;
  # Diz que o arquivo 'index.html' será o padrão quando acessar um diretório (por exemplo '/')

  location / {
    # Define as regras para qualquer requisição que comece com '/'

    try_files $uri $uri/ /index.html;
    # Tenta servir o arquivo requisitado ($uri).
    # Se não encontrar, tenta servir como diretório ($uri/).
    # Se ainda não encontrar, serve '/index.html'.
    # Isso é fundamental para aplicações SPA (Angular, React, Vue) que usam rotas client-side.
  }

  # Cache de assets (opcional)
  location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    # Esse bloco usa uma expressão regular (case-insensitive por causa do '~*')
    # para capturar arquivos com extensão js, css, imagens e ícones.

    expires 1y;
    # Diz para o navegador cachear esses arquivos por 1 ano.

    add_header Cache-Control "public";
    # Adiciona o cabeçalho HTTP 'Cache-Control: public', permitindo caching por proxies e CDNs.
  }
}
